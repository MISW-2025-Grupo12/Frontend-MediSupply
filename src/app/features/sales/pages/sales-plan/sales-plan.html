<div class="page-container" *transloco="let t">
  <div class="page-header">
    <h1 class="page-title">{{ t('header.salesPlan') }}</h1>
    <div class="page-actions">
      @if (isAdmin()) {
        <button 
          mat-raised-button 
          color="primary"
          class="page-action-button"
          (click)="navigateToAddSalesPlan()">
          <mat-icon>add</mat-icon>
          {{ t('addSalesPlan.title') }}
        </button>
      }
    </div>
  </div>

  <div class="page-content">
    @if (salesPlans().length > 0) {
      <div class="sales-plans-grid">
        @for (plan of salesPlans(); track plan.id) {
          <mat-card class="sales-plan-card" (click)="navigateToSalesPlanDetail(plan.id)">
            <mat-card-header>
              <mat-card-title>{{ plan.name }}</mat-card-title>
            </mat-card-header>
            
            <mat-card-content>
              <div class="plan-details">
                <div class="detail-item">
                  <mat-icon class="detail-icon">calendar_today</mat-icon>
                  <div class="detail-content">
                    <span class="detail-label">{{ t('salesPlan.startDate') }}:</span>
                    <span class="detail-value">{{ plan.startDate | date:'mediumDate' }}</span>
                  </div>
                </div>
                
                <div class="detail-item">
                  <mat-icon class="detail-icon">event</mat-icon>
                  <div class="detail-content">
                    <span class="detail-label">{{ t('salesPlan.endDate') }}:</span>
                    <span class="detail-value">{{ plan.endDate | date:'mediumDate' }}</span>
                  </div>
                </div>
                
                <div class="detail-item">
                  <mat-icon class="detail-icon">people</mat-icon>
                  <div class="detail-content">
                    <span class="detail-label">{{ t('salesPlan.customers') }}:</span>
                    <span class="detail-value">{{ getTotalCustomers(plan) }}</span>
                  </div>
                </div>
                
                <div class="detail-item">
                  <mat-icon class="detail-icon">event_note</mat-icon>
                  <div class="detail-content">
                    <span class="detail-label">{{ t('salesPlan.visits') }}:</span>
                    <span class="detail-value">{{ getTotalVisits(plan) }}</span>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
      </div>
    } @else {
      <div class="empty-state">
        <mat-icon class="empty-icon">assignment</mat-icon>
        <p>{{ t('salesPlan.noSalesPlans') }}</p>
      </div>
    }
  </div>
</div>
